apiVersion: v1
kind: BuildConfig
metadata:
  name: myfirstpipeline
  labels:
    name: myfirstpipeline
  annotations:
    pipeline.alpha.openshift.io/uses: '[{"name": "php", "namespace": "", "kind": "DeploymentConfig"}]'
spec:
  runPolicy: Serial
  strategy:
    type: JenkinsPipeline
	jenkinsPipelineStrategy:
	  jenkinsfile: |-
	  node('') {
	    stage 'buildInDev'
		   openshiftBuild(namespace: 'dev',buildConfig: 'php', showBuildLogs: 'true')
		stage 'deployInDev'
		   openshiftDeploy(namespace: 'dev',deploymentConfig: 'php')
		   openshiftScale(namespace: 'dev',deploymentConfig: 'php',replicaCount: '2')"
		stage 'deployInQA'
		input 'Proceeed ?'
            openshiftTag(namespace: 'dev', sourceStream: 'php',  sourceTag: 'latest', destinationStream: 'php', destinationTag: 'promoteToQA')
            openshiftDeploy(namespace:'qa',deploymentConfig: 'php')
            openshiftScale(namespace:'qa',deploymentConfig: 'php',replicaCount: '5')
output:
resources:
postCommit:
